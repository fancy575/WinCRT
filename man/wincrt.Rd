% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/WinCRT.R
\name{wincrt}
\alias{wincrt}
\title{Win Ratio for Cluster-Randomized Trials (Hierarchical or Single Endpoint)}
\usage{
wincrt(data, id, trt, cluster, outcome, tier, lower_better = FALSE)
}
\arguments{
\item{data}{A data.frame/tibble in \emph{long} format (possibly multiple rows per subject).}

\item{id}{Name of subject ID column. Default: "id".}

\item{trt}{Name of treatment/arm indicator column (two arms). Default: "z".}

\item{cluster}{Name of cluster ID column. Default: "cluster".}

\item{outcome}{Name of the numeric outcome column. Default: "outcome".
For survival-style data, this is a time; for a single endpoint, it is the scalar outcome.}

\item{tier}{Name of the tier code column. Default: "tier". Use \code{0} for censoring rows
(survival-style), and \code{1..K} for event tiers with larger meaning higher priority.
For a single endpoint, set \code{tier=1} for all rows and provide no censoring rows.}

\item{lower_better}{Logical; if \code{TRUE}, smaller outcome values mean better.
The scale is flipped internally so that the kernel’s “earlier is worse” rule yields
the correct win/loss direction. Default: \code{FALSE}.}
}
\value{
An object of class \code{"WinCRT"} with:
\itemize{
\item \code{estimates}: \code{W_D}, \code{logW_R}, \code{logW_O}, \code{p_ties}
\item \code{variances}: \code{VarW_D}, \code{VarlogW_R}, \code{VarlogW_O}
\item \code{rho}: rank-based within-cluster correlation
\item \code{counts}: totals across arms: \code{wins}, \code{losses}, \code{ties}, \code{T0}, \code{ties_cnt}
\item \code{per_id}: per-subject table: \code{id, cluster, z, w, l, t, tie_diff, rank}
\item \code{per_cluster}: per-cluster table with score \code{S} and \code{z}
}
}
\description{
Computes win/loss/tie tallies and win-ratio statistics in CRTs using a
hierarchical endpoint (tiers) or a single endpoint.
performs the pairwise counting; this R wrapper handles validation and summaries.
}
\examples{
\dontrun{
  # Survival-style with tiers (0=censor, 1=hosp, 2=death)
  res <- wincrt(df, id="id", trt="z", cluster="cluster",
                outcome="time", tier="event")

  # Single endpoint (no censoring), smaller is better
  df$tier <- 1L
  res <- wincrt(df, outcome="score", tier="tier", lower_better=TRUE)
}

}
